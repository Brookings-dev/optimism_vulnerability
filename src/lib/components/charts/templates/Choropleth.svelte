<script>
	import { LayerCake, Svg } from 'layercake';
  	import { feature } from 'topojson-client';
  	import { geoAlbersUsa } from 'd3-geo';
	import Map from "$lib/components/charts/map/Map.svelte"
	import topojson from '$lib/data/cartography/states.topojson.json';

	let containerWidth = 300;
	$: containerHeight = containerWidth * 0.585;

	const geojson = feature(topojson, topojson.objects.collection);
	const projection = geoAlbersUsa;

	let evt;
  	let hideTooltip = true;
</script>

<div
	class="w-full h-screen overflow-hidden"
	style:height="{containerHeight}px"
	bind:clientWidth={containerWidth}
	
>
	<LayerCake
		data={geojson}
	>
		<Svg>
			<Map fill="yellow" {projection} 
			on:mousemove={event => evt = hideTooltip = event}
			on:mouseout={() => hideTooltip = true} />
		</Svg>
	</LayerCake>
</div>
